events {}

http {
    server {
        # Server configuration
        listen 8080;
        add_header 'Access-Control-Allow-Origin' '*';
        
        location /CITY-SERVICE {
            rewrite ^/CITY-SERVICE/(.*)$ /$1 break;

            proxy_pass ${CITY_SERVICE_URL};
            proxy_ssl_server_name on;
            proxy_http_version 1.1;
        }

        location /WEATHER-SERVICE {
            rewrite ^/WEATHER-SERVICE/(.*)$ /$1 break;

            proxy_pass ${WEATHER_SERVICE_URL};
            proxy_ssl_server_name on;
            proxy_http_version 1.1;
        }
    }
}
